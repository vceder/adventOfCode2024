import { describe, expect, test } from "vitest";

import { findGuard, partA, isGuard, buildMatrix, partB } from "./06";

describe("Day 6: Guard Gallivant", () => {
  describe("Basics", () => {
    test("Is Guard", () => {
      expect(isGuard({ value: "^" })).toBe(true);
    });
    test("Find Guard", () => {
      const matrix = buildMatrix([
        ["#", "."],
        ["^", "."],
      ]);
      expect(findGuard(matrix)).toStrictEqual({
        x: 0,
        y: 1,
        value: "^",
        visited: false,
        previousDirections: [],
      });
    });
  });
  describe("Part A", () => {
    test("Small Matrix", () => {
      const matrix = [
        ["#", "."],
        ["^", "."],
      ];
      expect(partA(matrix)).toBe(2);
    });
    test("Big Matrix", () => {
      const matrix = [
        [".", ".", ".", ".", "#", ".", ".", ".", ".", "."],
        [".", ".", ".", ".", ".", ".", ".", ".", ".", "#"],
        [".", ".", ".", ".", ".", ".", ".", ".", ".", "."],
        [".", ".", "#", ".", ".", ".", ".", ".", ".", "."],
        [".", ".", ".", ".", ".", ".", ".", "#", ".", "."],
        [".", ".", ".", ".", ".", ".", ".", ".", ".", "."],
        [".", "#", ".", ".", "^", ".", ".", ".", ".", "."],
        [".", ".", ".", ".", ".", ".", ".", ".", "#", "."],
        ["#", ".", ".", ".", ".", ".", ".", ".", ".", "."],
        [".", ".", ".", ".", ".", ".", "#", ".", ".", "."],
      ];
      expect(partA(matrix)).toBe(41);
    });
  });
  test("Part B", () => {
    const matrix = [
      [".", ".", ".", ".", "#", ".", ".", ".", ".", "."],
      [".", ".", ".", ".", ".", ".", ".", ".", ".", "#"],
      [".", ".", ".", ".", ".", ".", ".", ".", ".", "."],
      [".", ".", "#", ".", ".", ".", ".", ".", ".", "."],
      [".", ".", ".", ".", ".", ".", ".", "#", ".", "."],
      [".", ".", ".", ".", ".", ".", ".", ".", ".", "."],
      [".", "#", ".", ".", "^", ".", ".", ".", ".", "."],
      [".", ".", ".", ".", ".", ".", ".", ".", "#", "."],
      ["#", ".", ".", ".", ".", ".", ".", ".", ".", "."],
      [".", ".", ".", ".", ".", ".", "#", ".", ".", "."],
    ];
    expect(partB(matrix)).toBe(6);
  });
});
